---
allowed-tools: Bash(*), Read(*), LS(*), Glob(*), Grep(*), mcp__memory__*, mcp__thinking__*
error-handling: comprehensive-framework, architecture-analysis-validation, design-pattern-handling, memory-integration-handling, complexity-assessment-validation, recovery-procedures
description: Analyze project structure, architecture patterns, and build comprehensive architectural intelligence through systematic analysis.
---

# Architect

## Context

This command provides comprehensive architectural intelligence by systematically analyzing codebases, identifying patterns, calculating complexity metrics, and building persistent knowledge about architectural decisions over time. It analyzes project structure, dependencies, and architectural patterns while building persistent architectural intelligence.

## Your Task

Execute the following steps to analyze the project architecture systematically:

1. **Initialize sequential thinking**: Use `mcp__thinking__sequentialthinking` to plan the analysis approach systematically
   - **Error Handling**: Handle thinking process timeouts, architectural planning failures, and approach validation issues
   - **Validation**: Verify architectural scope and methodology are appropriate for the project
   - **Recovery**: Use simplified architectural approach or incremental analysis steps

2. **Read architectural memory**: Use `mcp__memory__read_graph` to understand existing architectural knowledge and patterns
   - **Error Handling**: Handle memory server connectivity issues, graph corruption, and access failures
   - **Validation**: Verify memory graph integrity and architectural pattern accessibility
   - **Recovery**: Use `/meditate` for memory repair or continue with available architectural knowledge

3. **Map project structure**: Use `LS` and `Glob` to map the project structure, directories, and key files
   - **Error Handling**: Handle file system access failures, permission errors, and structure mapping issues
   - **Validation**: Verify project structure mapping completeness and accuracy
   - **Recovery**: Use alternative mapping methods or focus on accessible directories

4. **Analyze code patterns**: Use `Grep` and `Read` to analyze code patterns, design decisions, and architectural elements
   - **Error Handling**: Handle code analysis failures, file access errors, and pattern recognition issues
   - **Validation**: Verify code pattern analysis completeness and accuracy
   - **Recovery**: Use alternative analysis methods or focus on accessible code sections

5. **Assess complexity**: Calculate complexity metrics, identify technical debt, and evaluate maintainability
   - **Error Handling**: Handle complexity calculation failures, metric validation issues, and debt assessment problems
   - **Recovery**: Use simplified complexity metrics or manual assessment techniques

6. **Identify patterns**: Recognize recurring architectural patterns, anti-patterns, and design principles
   - **Error Handling**: Handle pattern identification failures, recognition issues, and validation problems
   - **Recovery**: Use simplified pattern recognition or manual identification techniques

7. **Map dependencies**: Analyze internal and external dependencies, coupling issues, and architectural boundaries
   - **Error Handling**: Handle dependency analysis failures, mapping issues, and boundary identification problems
   - **Recovery**: Use alternative dependency analysis methods or focus on critical dependencies

8. **Evaluate quality**: Assess code quality, testing patterns, and documentation quality
   - **Error Handling**: Handle quality assessment failures, evaluation issues, and validation problems
   - **Recovery**: Use simplified quality metrics or manual assessment techniques

9. **Generate recommendations**: Provide actionable improvement suggestions prioritized by impact and effort
   - **Error Handling**: Handle recommendation generation failures, prioritization issues, and implementation guidance problems
   - **Recovery**: Use simplified recommendation formats or focus on critical improvements

10. **Update memory**: Store architectural findings and patterns using `mcp__memory__*` tools
    - **Error Handling**: Handle memory update failures, entity creation issues, and storage problems
    - **Recovery**: Use alternative memory storage methods or retry with simplified entities

## Error Handling

### Tool Result Validation

- **Architecture Analysis**: Validate all `Read`, `Grep`, `LS`, and `Glob` operations for project access and analysis completeness
- **Memory Operations**: Verify all `mcp__memory__*` tool results for errors, corruption, and timeout issues
- **Thinking Operations**: Handle sequential thinking timeouts or reasoning failures
- **Complexity Assessment**: Validate complexity metrics calculation and technical debt assessment
- **Pattern Recognition**: Ensure architectural pattern identification and validation accuracy
- **Dependency Analysis**: Verify dependency mapping and boundary identification completeness

### Standard Error Response Format

``` markdown
ERROR: [Category] - [Specific Issue]
Context: [Operation being attempted]
Cause: [Root cause if identifiable]
Recovery: [Specific recovery steps]
```

### Recovery Procedures

1. **Architecture Analysis Failures**:
   - Validate file paths and project accessibility
   - Use alternative analysis methods
   - Focus on accessible project components

2. **Memory Operation Failures**:
   - Check memory server connectivity and permissions
   - Use `/meditate` command for memory corruption repair
   - Continue with available architectural intelligence

3. **Complexity Assessment Issues**:
   - Use simplified complexity metrics
   - Apply manual assessment techniques
   - Focus on critical complexity indicators

4. **Pattern Recognition Problems**:
   - Use simplified pattern recognition
   - Apply manual identification techniques
   - Focus on obvious architectural patterns

### Context Preservation

- Save architectural analysis progress to memory before error recovery attempts
- Maintain architectural context through error conditions
- Document error context and recovery attempts for learning
- Preserve partial analysis results during error recovery

## Verification

- **Pre-Analysis**: Verify tool availability, memory connectivity, and project access
- **During Process**: Validate each operation and handle failures immediately
- **Comprehensive Coverage**: Confirm comprehensive analysis covers all major architectural aspects
- **Complexity Metrics**: Verify complexity metrics and technical debt assessment are accurate
- **Pattern Documentation**: Check that architectural patterns are properly identified and documented
- **Recommendations**: Ensure recommendations are actionable and prioritized appropriately
- **Memory Integration**: Validate architectural intelligence was updated in memory
- **Error Handling**: Verify error handling provided clear feedback and recovery options

## Output

The command should produce:

- Comprehensive architectural analysis report with findings and insights
- Identified architectural patterns, anti-patterns, and design principles
- Complexity metrics, technical debt assessment, and quality evaluation
- Prioritized improvement recommendations with implementation guidance
- Updated architectural intelligence in project memory
- **Error handling**: Clear error messages using standard format with specific recovery guidance
- **Recovery documentation**: Record of any errors encountered and recovery procedures applied
- **Context preservation**: Documentation of preserved architectural context during error conditions

### Error Response Examples

**Architecture Analysis Error**:

``` markdown
ERROR: Architecture Analysis - Project structure mapping failed
Context: Mapping project structure, directories, and key files
Cause: File system access permissions or project structure complexity
Recovery:
1. Validate file paths and project accessibility
2. Use alternative analysis methods
3. Focus on accessible project components
```

**Complexity Assessment Failure**:

``` markdown
ERROR: Complexity Assessment - Metrics calculation failed
Context: Calculating complexity metrics and technical debt assessment
Cause: Code complexity or analysis tool limitations
Recovery:
1. Use simplified complexity metrics
2. Apply manual assessment techniques
3. Focus on critical complexity indicators
```

**Memory Integration Failure**:

``` markdown
ERROR: Memory Operation - Architectural intelligence update failed
Context: Storing architectural findings and patterns in memory
Cause: Memory server connectivity issues or storage corruption
Recovery:
1. Use `/meditate` to repair memory corruption
2. Continue with available architectural intelligence
3. Store findings using alternative methods
```
